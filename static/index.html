<!DOCTYPE html>
<html>
<head>
	<title>homepage</title>
	<meta charset="utf-8">
	<link rel="stylesheet" type="text/css" href="css/index.css">
</head>
<body>
<div id="box">
	<header>
		<a href="login.html"><img src="photo/login.png" id="login">
		<h3 id="titleT" style="font-size: 22px;"></h3>
		<hr>
	</header>
	<div id="jsonWrap">
	</div>
	<div id="footer">
		<div id="footer1">
			<img src="photo/1.png">
		</div>
		<div id="footer2">
			<a href="calendar.html"><img src="photo/2.png"></a>
		</div>
		<div id="footer3">
			<a href="Second.html"><img src="photo/3.png"></a>
		</div>
		<div id="footer4">
			<a href="Todolist.html"><img src="photo/4.png"></a>
		</div>
		<div id="footer5">
			<a href="Planforme.html"><img src="photo/5.png"></a>
		</div>
	</div>
</div>
<script src="js/jquery.js"></script>
<script src="js/json.js"></script>
<script>
    $(function () {
        getData()
    })
    function getData() {
        var myDate = new Date();
        var xTtime = myDate.toLocaleDateString( ).replace(/\//g, '-');        //获取日期与时间
		var titleT=new Date(xTtime).toDateString();
		$("#titleT").html(titleT);
        var assObj=saveAss();
        var  assArr;
        if (assObj) {
         assArr=Storageget('assignment');
        }
        else {
            $.ajax({
                type: "get",
                url: "./untitled.json",
                async:false,
                success: function (msg) {
                    console.log(msg)
                    assArr=msg['assignment'];
                    Storageset('assignment',assArr);
                },
                error: function (err) {
                    console.log(err);
                }
            })
        }
        $('#jsonWrap').html('');
        $(assArr).each(function (i,val) {
            var name=val.name;
            var classN=val.classN;
            var date = new Date(val.date).toDateString();
            var  startDate = Date.parse(date);
            var  endDate = Date.parse(xTtime);
            var days=(endDate - startDate)/(1*24*60*60*1000);
            var obj='<div class="objS">\n' +
                '\t\t\t<h4>'+name+'</h4>\n' +
                '\t\t\t<h4>'+classN+'</h4>\n' +
                '\t\t\t<h3>Due Date:&nbsp;'+date+'</h3>\n' +
                '\t\t\t<h3>Time Left:&nbsp;'+Math.abs(parseInt(days))+' days</h3>\n' +
                '\t\t</div>'
			$('#jsonWrap').append(obj);
        })
    }
</script>
</body>
</html>